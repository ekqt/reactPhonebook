(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),a=t.n(c),s=t(3),i=t(2),r=t(0),l=function(e){var n=e.filter,t=e.handleFilterChange;return Object(r.jsx)("div",{className:"field",children:Object(r.jsx)("div",{className:"control",children:Object(r.jsx)("input",{className:"input",value:n,onChange:t,placeholder:"Search for..."})})})},o=function(e){var n=e.addName,t=e.newName,c=e.newNumber,a=e.handleNameChange,s=e.handleNumberChange;return Object(r.jsx)("form",{onSubmit:n,children:Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"field",children:[Object(r.jsx)("label",{className:"label",children:"Name"}),Object(r.jsx)("div",{className:"control",children:Object(r.jsx)("input",{className:"input",value:t,onChange:a,placeholder:"John Doe"})})]}),Object(r.jsxs)("div",{className:"field",children:[Object(r.jsx)("label",{className:"label",children:"Number"}),Object(r.jsx)("div",{className:"control",children:Object(r.jsx)("input",{className:"input",value:c,onChange:s,placeholder:"(+420) 555-000-000"})})]}),Object(r.jsx)("div",{className:"field",children:Object(r.jsx)("div",{className:"control",children:Object(r.jsx)("button",{className:"button is-outlined",type:"submit",children:"Add"})})})]})})},u=function(e){var n=e.person,t=e.removePerson;return Object(r.jsx)("div",{className:"card mb-3",children:Object(r.jsx)("div",{className:"card-content",children:Object(r.jsxs)("div",{className:"media",children:[Object(r.jsxs)("div",{className:"media-content",children:[Object(r.jsxs)("div",{class:"icon-text",children:[Object(r.jsx)("span",{class:"icon is-small",children:Object(r.jsx)("i",{class:"fas fa-user"})}),Object(r.jsx)("span",{className:"title is-5 pl-2",children:n.name},n.id)]}),Object(r.jsxs)("div",{class:"icon-text",children:[Object(r.jsx)("span",{class:"icon is-small",children:Object(r.jsx)("i",{class:"fas fa-phone"})}),Object(r.jsx)("span",{className:"subtitle is-6 pl-2 has-text-grey",children:n.number})]})]}),Object(r.jsx)("div",{className:"media-right",children:Object(r.jsx)("button",{className:"button is-small is-white",onClick:t,children:" \ud83d\uddd1 "})})]})})})},d=t(4),j=t.n(d),m="/api/persons",b={getAll:function(){return j.a.get(m).then((function(e){return e.data}))},create:function(e){return j.a.post(m,e).then((function(e){return e.data}))},destroy:function(e){return j.a.delete(e)},update:function(e,n){return j.a.put(e,n).then((function(e){return e.data}))}},h=function(e){var n=e.type,t=e.message;return null===t?null:Object(r.jsx)("div",{className:n,children:t})},f=function(){var e=Object(i.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(i.useState)(""),d=Object(s.a)(a,2),j=d[0],m=d[1],f=Object(i.useState)(""),O=Object(s.a)(f,2),p=O[0],x=O[1],v=Object(i.useState)(""),N=Object(s.a)(v,2),g=N[0],w=N[1],y=Object(i.useState)(""),C=Object(s.a)(y,2),S=C[0],k=C[1],A=Object(i.useState)(null),T=Object(s.a)(A,2),L=T[0],D=T[1];Object(i.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]);var J=g?t.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())})):t;return Object(r.jsx)("div",{className:"columns py-5 px-4",children:Object(r.jsxs)("div",{className:"column is-6 is-offset-3",children:[Object(r.jsx)("h1",{children:"React Phonebook"}),Object(r.jsx)(h,{type:S,message:L}),Object(r.jsx)(l,{filter:g,handleFilterChange:function(e){w(e.target.value)}}),Object(r.jsx)("h2",{children:"Add a new"}),Object(r.jsx)(o,{newName:j,newNumber:p,handleNameChange:function(e){m(e.target.value)},handleNumberChange:function(e){x(e.target.value)},addName:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===j.toLowerCase()}));if(n){if(window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?"))){var a="/api/persons/".concat(n.id),s={name:j,number:p};b.update(a,s).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),m(""),x(""),k("notification is-primary is-light"),D("Updated '".concat(e.name,"'")),setTimeout((function(){D(null)}),2500)}))}}else{var i={name:j,number:p};b.create(i).then((function(e){c(t.concat(e)),m(""),x(""),k("notification is-primary is-light"),D("Added '".concat(e.name,"'")),setTimeout((function(){D(null)}),2500)})).catch((function(e){k("notification is-danger is-light"),console.log(e.response),D("Sorry! ".concat(e.response.data.error)),setTimeout((function(){D(null)}),2500)}))}}}),Object(r.jsx)("h2",{children:"Numbers"}),J.map((function(e,n){return Object(r.jsx)(u,{person:e,removePerson:function(){return function(e){var n="/api/persons/".concat(e.id);window.confirm("Would you like to remove ".concat(e.name,"?"))&&b.destroy(n).then((function(){c(t.filter((function(n){return n.id!==e.id}))),k("notification is-primary is-light"),D("Deleted '".concat(e.name,"'")),setTimeout((function(){D(null)}),2500)})).catch((function(){k("notification is-danger is-light"),D("Contact '".concat(e.name,"' was already removed from server")),setTimeout((function(){D(null)}),2500)}))}(e)}},n)}))]})})};t(38);a.a.render(Object(r.jsx)(f,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.af1fafae.chunk.js.map